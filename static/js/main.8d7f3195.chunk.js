(this["webpackJsonpcovid-charts"]=this["webpackJsonpcovid-charts"]||[]).push([[0],{188:function(e,t,a){},246:function(e,t,a){e.exports=a(474)},251:function(e,t,a){},428:function(e,t,a){},445:function(e,t,a){},446:function(e,t,a){},447:function(e,t,a){},448:function(e,t,a){},449:function(e,t,a){},453:function(e,t){},454:function(e,t){},465:function(e,t){},468:function(e,t){},469:function(e,t){},473:function(e,t,a){},474:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a.n(n),c=a(52),o=a.n(c),i=(a(251),a(27)),l=a(4),s=a(9),u=a(13),d=a(14),h=a(87),p=a(37),m=a(36),v=a(32),f=(a(428),function(e){var t=e.options,a=e.selected,n=e.onChange;return r.a.createElement("div",{className:"chart-options"},t.map((function(e,t){return r.a.createElement("label",{key:t},r.a.createElement("input",{type:"radio",name:"vote",value:e.value,key:t,checked:a===e.value,onChange:n}),e.text)})))}),y=a(86),g=a.n(y),E={"cache-control":"no-cache","x-apikey":"5c932ad1cac6621685acc11e"},b=function(){return"https://api.covid19api.com/countries"},C=function(e){return"https://api.covid19api.com/dayone/country/".concat(e)},O=function(e){return g.a.get(C(e),{headers:E})},S=a(29),D=a.n(S),j=function(e){return e&&e.some((function(e){return""!==e.Province}))},w=function(e){return e&&e.some((function(e){return""!==e.City}))},k=function(e){var t={};return e.forEach((function(e){var a=""===e.Province?"Undefined":e.Province,n=""===e.City?"Undefined":e.City,r=Object(i.a)(Object(i.a)({},e),{},{Province:a,City:n});Object.keys(t).includes(r.Province)?t[r.Province].push(r):t=Object(i.a)(Object(i.a)({},t),{},Object(v.a)({},r.Province,[r]))})),t},_=function(e,t){return e[t.label].map((function(e){return e.City})).filter((function(e,t,a){return a.indexOf(e)===t})).sort().map((function(e){return{value:e,name:e,label:e}}))},x=function(e,t,a){return e[t.label].filter((function(e){return e.City===a.label}))},N=function(e){if(e.length){for(var t=e[0],a=[t.Confirmed],n=[t.Deaths],r=1;r<e.length;r++){t=e[r];var c=e[r-1];a[r]=t.Confirmed-c.Confirmed,n[r]=t.Deaths-c.Deaths}return e.map((function(e,t){return Object(i.a)(Object(i.a)({},e),{},{Confirmed:a[t]})}))}},I=function(e){return Object.keys(e).sort().map((function(e){return{name:e,label:e,value:e}}))},M=function(e){return e.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{Date:D()(e.Date).format("MMM Do")})}))},V=(a(445),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={isLoading:!1,countryData:[],yValues:[{value:"Confirmed",text:"Confirmed"},{value:"Deaths",text:"Deaths"},{value:"Recovered",text:"Recovered"},{value:"Active",text:"Active"}],selectedY:"Confirmed"},e.getCountryInfo=function(){var t=e.props,a=t.countryCompare,n=t.hasProvinces;e.setState({countryData:[]}),n||(e.setState({isLoading:!0}),O(a.value).then((function(t){return e.setState({countryData:t.data})})).finally((function(){return e.setState({isLoading:!1})})))},e.getData=function(){var t=e.props,a=t.data,n=t.countryCompare,r=e.state,c=r.countryData,o=r.selectedY,l=[];if(a.length&&c.length){var s={};c.forEach((function(e){s=Object(i.a)(Object(i.a)({},s),{},Object(v.a)({},e.Date,e))})),l=a.map((function(e){var t,a=s[e.Date];return t={},Object(v.a)(t,e.Country,e[o]),Object(v.a)(t,n.label,a?a[o]:0),Object(v.a)(t,"Date",e.Date),t}))}return l},e.renderChart=function(){var t=e.props.width,a=e.getData();if(!a||!a.length)return r.a.createElement("div",null,"Data no available");a=M(a);var n=Object.keys(a[0]);return r.a.createElement(p.b,{width:t,height:250,data:a,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"color1",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})),r.a.createElement("linearGradient",{id:"color2",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0}))),r.a.createElement(p.e,{dataKey:"Date"}),r.a.createElement(p.f,null),r.a.createElement(p.c,{strokeDasharray:"3 3"}),r.a.createElement(p.d,null),r.a.createElement(p.a,{type:"monotone",dataKey:n[0],stroke:"#82ca9d",fillOpacity:1,fill:"url(#color1)"}),r.a.createElement(p.a,{type:"monotone",dataKey:n[1],stroke:"#8884d8",fillOpacity:1,fill:"url(#color2)"}))},e.renderOptions=function(){var t=e.state,a=t.yValues,n=t.selectedY;return r.a.createElement("div",{className:"compare-chart__options"},r.a.createElement("div",{className:"compare-chart__values"},"Values (Y Axis)"),r.a.createElement(f,{options:a,selected:n,onChange:function(t){return t&&e.setState({selectedY:t.target.value})}}))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getCountryInfo()}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.countryCompare;Object(m.isEqual)(e.countryCompare,a)||this.getCountryInfo()}},{key:"render",value:function(){return this.props.hasProvinces?r.a.createElement("div",null,"Country not available to compare"):r.a.createElement("div",{className:"compare-chart"},this.renderOptions(),r.a.createElement("hr",null),this.renderChart())}}]),a}(n.Component)),T=(a(446),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("div",null,"Covid Charts\u2122 is a platform coded by \xa0",r.a.createElement("a",{href:"http://stuffie.azurewebsites.net/PM_Carlos-Reyes2.html",target:"_blank",rel:"noopener noreferrer"},"Carlos Reyes-Rico"),"."),r.a.createElement("div",null,"Why?: Click ",r.a.createElement("a",{href:"https://github.com/reyesrico/CovidCharts/blob/master/README.md"},"here")),r.a.createElement("div",null,"Code: ",r.a.createElement("a",{href:"https://github.com/reyesrico/CovidCharts"},"https://github.com/reyesrico/CovidCharts")),r.a.createElement("div",null,"Contact and Follow Me! Twitter: ",r.a.createElement("a",{href:"https://twitter.com/reyesrico"},"@reyesrico")))}}]),a}(n.Component)),A=(a(447),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.countrySelected;return r.a.createElement("div",{className:"instructions"},r.a.createElement("h4",{className:"instructions__title"},"Instructions"),r.a.createElement("ol",{className:"instructions__list"},r.a.createElement("li",null,"Select a country"),r.a.createElement("li",null,"If country has states data: select a state"),r.a.createElement("li",null,"If country has cities data: select a city")),r.a.createElement("div",{className:"instructions__examples"},r.a.createElement("div",null,"Flatten Curves Examples: ",r.a.createElement("b",null,"Germany, Korea (South), United States (NY, NY)")),r.a.createElement("button",{className:"instructions__button",onClick:function(t){return t&&localStorage.setItem("country",e.value)}},"Save Default Country")))}}]),a}(n.Component)),z=a(197),P=a.n(z),R=(a(448),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"getSize",value:function(){switch(this.props.size){case"sm":return 8;case"md":return 16;case"lg":return 32;case"xl":return 64;default:return 8}}},{key:"render",value:function(){var e=this.props,t=e.message,a=e.showProgress,n=this.getSize();return r.a.createElement("div",{className:a?"stuffie-loading-progress":"stuffie-loading"},r.a.createElement(P.a,{type:"spin",color:"#00f",height:n,width:n}),t&&r.a.createElement("div",{className:"stuffie-loading__message"},t))}}]),a}(n.Component)),L=a(62),F=a.n(L),Y=a(75),q=a.n(Y),U={chart:{height:250,zoomType:"x"},title:{text:""},legend:{enabled:!1},xAxis:{type:"datetime"},tooltip:{shared:!0},credits:{enabled:!1},plotOptions:{areaspline:{fillOpacity:.1}}},G=(a(449),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={series:{},yValues:{Confirmed:!0,Deaths:!1,Recovered:!1,Active:!1,ConfirmedInc:!1,DeathsInc:!1,RecoveredInc:!1,ActiveInc:!1}},e.clearYValues=function(){var t={};Object.keys(e.state.yValues).forEach((function(e){var a="Confirmed"===e;t=Object(i.a)(Object(i.a)({},t),{},Object(v.a)({},e,a))})),e.setState({yValues:t})},e.yValuesFalse=function(){return!Object.values(e.state.yValues).reduce((function(e,t){return e||t}))},e.renderOptions=function(){var t=e.state.yValues;return r.a.createElement("div",{className:"make-chart__options"},r.a.createElement("div",{className:"make-chart__values"},"Values (Y Axis)"),Object.keys(t).map((function(a,n){var c=t[a];return r.a.createElement("div",{key:n},r.a.createElement("input",{checked:c,type:"checkbox",name:"yaxis",value:a,id:a,onChange:function(t){return t&&e.changeInput(a)}}),a)})))},e.getData=function(){var t=e.props.data,a=e.state.yValues;if(!e.yValuesFalse()){var n=[],r=[],c=[],o=[],i=[],l=[],s=[],u=[];t.forEach((function(e,d){if(a.Confirmed&&n.push([D()(e.Date).valueOf(),e.Confirmed]),a.Deaths&&r.push([D()(e.Date).valueOf(),e.Deaths]),a.Recovered&&c.push([D()(e.Date).valueOf(),e.Recovered]),a.Active&&o.push([D()(e.Date).valueOf(),e.Active]),0===d)a.ConfirmedInc&&i.push([D()(e.Date).valueOf(),0]),a.DeathsInc&&l.push([D()(e.Date).valueOf(),0]),a.RecoveredInc&&s.push([D()(e.Date).valueOf(),0]),a.ActiveInc&&u.push([D()(e.Date).valueOf(),0]);else{var h=t[d-1];a.ConfirmedInc&&i.push([D()(e.Date).valueOf(),e.Confirmed-h.Confirmed]),a.DeathsInc&&l.push([D()(e.Date).valueOf(),e.Deaths-h.Deaths]),a.RecoveredInc&&s.push([D()(e.Date).valueOf(),e.Recovered-h.Recovered]),a.ActiveInc&&u.push([D()(e.Date).valueOf(),e.Active-h.Active])}}));var d=[];a.Confirmed&&d.push({type:"area",name:"Confirmed",data:n}),a.Deaths&&d.push({type:"area",name:"Deaths",data:r}),a.Recovered&&d.push({type:"area",name:"Recovered",data:c}),a.Active&&d.push({type:"area",name:"Active",data:o}),a.ConfirmedInc&&d.push({type:"area",name:"ConfirmedInc",data:i}),a.DeathsInc&&d.push({type:"area",name:"DeathsInc",data:l}),a.RecoveredInc&&d.push({type:"area",name:"RecoveredInc",data:s}),a.ActiveInc&&d.push({type:"area",name:"ActiveInc",data:u}),e.setState({series:d})}},e.renderChart=function(){var t=e.props.width,a=e.state.series,n=Object(i.a)(Object(i.a)({},U),{},{chart:Object(i.a)(Object(i.a)({},U.chart),{},{width:t}),series:a});if(!Object(m.isEmpty)(a))return r.a.createElement(q.a,{highcharts:F.a,options:n})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(e,t){var a=this.state.yValues;Object(m.isEqual)(t.yValues,a)||(this.yValuesFalse()?this.clearYValues():this.getData())}},{key:"changeInput",value:function(e){var t=this.state.yValues[e],a=Object(i.a)({},this.state.yValues);a[e]=!t,this.setState({yValues:a})}},{key:"render",value:function(){return r.a.createElement("div",{className:"make-chart"},this.renderOptions(),r.a.createElement("hr",null),this.renderChart())}}]),a}(n.Component)),K=a(3),W=a.n(K),B=a(12),H=a(38);function J(e,t,a){for(var n=[],r=0;r<=e.length-a;r++){for(var c=0,o=r+a,i=r;i<o&&i<=e.length;i++)c+=e[i][t]/a;n.push({set:e.slice(r,r+a),avg:c})}return n}function $(e,t,a,n,r,c,o,i){return Q.apply(this,arguments)}function Q(){return(Q=Object(B.a)(W.a.mark((function e(t,a,n,r,c,o,i,l){var s,u,d,h,p,m,v,f,y,g,E;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=r,100,10,10,u=[10,10],20,d=r,20,1,h=H.c(),p=t.slice(0,Math.floor(n/100*t.length)),m=a.slice(0,Math.floor(n/100*a.length)),v=H.d(p,[p.length,p[0].length]).div(H.b(10)),f=H.d(m,[m.length,1]).reshape([m.length,1]).div(H.b(10)),h.add(H.a.dense({units:100,inputShape:[s]})),h.add(H.a.reshape({targetShape:u})),y=[],g=0;g<i;g++)y.push(H.a.lstmCell({units:20}));return h.add(H.a.rnn({cell:y,inputShape:u,returnSequences:!1})),h.add(H.a.dense({units:1,inputShape:[20]})),h.compile({optimizer:H.e.adam(o),loss:"meanSquaredError"}),e.next=23,h.fit(v,f,{batchSize:d,epochs:c,callbacks:{onEpochEnd:function(){var e=Object(B.a)(W.a.mark((function e(t,a){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(t,a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}});case 23:return E=e.sent,e.abrupt("return",{model:h,stats:E});case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t,a){var n=e.slice(Math.floor(t/100*e.length),e.length),r=a.predict(H.d(n,[n.length,n[0].length]).div(H.b(10))).mul(10);return console.log(r),Array.from(r.dataSync())}a(188);var Z=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={projectedData:[],trainedData:[],modelTrained:{},readingEpoch:0,windowSize:7,epochSize:10,trainingSize:70,learningRate:.1,hiddenLayers:1,predValues:[],predTimestamps:[],loadingTrain:!1},e.clearState=function(){var t=e.props,a=t.data,n=t.type,r=e.state.windowSize;e.setState({projectedData:[],trainedData:J(a,n,r),modelTrained:{},readingEpoch:0,windowSize:7,epochSize:7,trainingSize:70,learningRate:.1,hiddenLayers:1,predValues:[],predTimestamps:[],loadingTrain:!1})},e.getSeries=function(t){var a=e.props,n=a.data,r=a.type,c=e.state,o=c.predValues,i=c.predTimestamps,l=c.trainedData,s=c.windowSize,u=[],d=[],h=[],p=[],m=0;return n.forEach((function(e,t){if(d.push([D()(e.Date).valueOf(),e[r]]),t>=s){var a=l[m++];h.push([D()(e.Date).valueOf(),Math.round(a.avg)])}})),t&&o.forEach((function(e,t){p.push([D()(i[t]).valueOf(),Math.round(e)])})),u.push({type:"area",name:r,data:d}),u.push({type:"line",name:"Trained",data:h}),u.push({type:"line",name:"Predicted",data:p,color:"#FF00FF"}),u},e.trainModel=Object(B.a)(W.a.mark((function t(){var a,n,r,c,o,i,l,s,u,d,h,p,m,v,f,y,g;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.type,n=e.state,r=n.trainedData,c=n.trainingSize,o=n.windowSize,i=n.epochSize,l=n.learningRate,s=n.hiddenLayers,e.setState({loadingTrain:!0}),u=[],d=r.map((function(e){return e.set.map((function(e){return e[a]}))})),h=r.map((function(e){return e.avg})),p=c,m=i,v=l,f=s,y=function(t,a){e.setState({readingEpoch:t+1}),u.push(a.loss)},t.next=13,$(d,h,p,o,m,v,f,y);case 13:g=t.sent,console.log(g),console.log(u),e.setState({modelTrained:g,loadingTrain:!1});case 17:case"end":return t.stop()}}),t)}))),e.predict=function(){var t=e.props,a=t.data,n=t.type,r=e.state,c=r.trainedData,o=r.trainingSize,i=r.modelTrained,l=r.windowSize;if(!Object(m.isEmpty)(i)){var s=c.map((function(e){return e.set.map((function(e){return e[n]}))}));console.log(s);var u=c.map((function(e){return e.avg}));console.log(u);var d=o;console.log("data.length: ".concat(a.length)),console.log("trainedData.length: ".concat(c.length)),console.log("trainingsize: ".concat(d));var h=u.slice(Math.floor(d/100*u.length),u.length);console.log("outps (Expected)"),console.log(h);var p=X(s,d,i.model);console.log("pred_vals"),console.log(p);var v=a.map((function(e){return e.Date})).splice(l+Math.floor(d/100*u.length),a.length);console.log(v),e.setState({predValues:p,predTimestamps:v})}},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,a=e.type,n=this.state.windowSize;this.setState({trainedData:J(t,a,n)})}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.data;Object(m.isEqual)(e.data,a)||this.clearState()}},{key:"renderChart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props.width,a=Object(i.a)(Object(i.a)({},U),{},{chart:Object(i.a)(Object(i.a)({},U.chart),{},{width:t}),series:this.getSeries(e)});return r.a.createElement(q.a,{highcharts:F.a,options:a})}},{key:"renderLoading",value:function(){var e=this.state,t=e.readingEpoch,a=e.epochSize,n=Math.floor(t/a*100);return r.a.createElement("div",{className:"projections__loading"},r.a.createElement("div",null,"Loading ".concat(n,"%")),r.a.createElement("progress",{id:"file",max:a,value:t}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.trainedData,n=t.modelTrained,c=t.loadingTrain,o=t.predValues;return a.length?r.a.createElement("div",{className:"projections"},r.a.createElement("h3",null,"SMA Computed"),a&&this.renderChart(),r.a.createElement("hr",null),r.a.createElement("h3",null,"Training"),r.a.createElement("button",{className:"projections__train-btn",onClick:function(t){return t&&e.trainModel()},disabled:c},"Train Model"),c&&this.renderLoading(),!c&&!Object(m.isEmpty)(n)&&r.a.createElement("div",{className:"projections__model-trained"},"Model Trained!"),r.a.createElement("hr",null),r.a.createElement("h3",null,"Validate"),r.a.createElement("button",{onClick:function(t){return t&&e.predict()},disabled:Object(m.isEmpty)(n)},"Predict (See Console)"),!!o.length&&this.renderChart(!0)):r.a.createElement("div",null,"Loading")}}]),a}(n.Component),ee=a(470),te=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!1,predictions:[],period:7},e.getPredictions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.95,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2,r=e.props,c=r.data,o=r.type,i=e.state.period,l=c.map((function(e){return e[o]})),s=l.length%i,u=l.slice(s),d=ee(u,t,a,n,i,i);e.setState({predictions:d})},e.getSeries=function(){var t,a=e.props,n=a.data,r=a.type,c=e.state,o=c.predictions,i=c.period,l=[],s=n.length>=2&&n[0].Date&&n[1].Date&&D()(n[1].Date).valueOf()-D()(n[0].Date).valueOf()||0,u=n.length%i,d=n.map((function(e){return[D()(e.Date).valueOf(),e[r]]})),h=null===d||void 0===d||null===(t=d[0])||void 0===t?void 0:t[0],p=o.map((function(e,t){var a=t+u;return a<n.length?h=d[a][0]:h+=s,[h,e]}));return l.push({type:"area",name:r,data:d}),l.push({type:"line",name:"Predicted ".concat(r),data:p,color:"#FF00FF"}),l},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getPredictions()}},{key:"componentDidUpdate",value:function(e){Object(m.isEqual)(e.data,this.props.data)||(this.setState({isLoading:!1,predictions:[],period:7}),this.getPredictions())}},{key:"renderChart",value:function(){var e=this.props.width,t=Object(i.a)(Object(i.a)({},U),{},{chart:Object(i.a)(Object(i.a)({},U.chart),{},{width:e}),series:this.getSeries()});return r.a.createElement(q.a,{highcharts:F.a,options:t})}},{key:"render",value:function(){var e=this.state.predictions;return r.a.createElement("div",{className:"projections"},r.a.createElement("h3",null,"Projections using Holt-Winters"),!e&&r.a.createElement("div",null,"No Predictions"),e&&!e.length&&r.a.createElement("div",null,"Loading"),e&&e.length&&this.renderChart(),r.a.createElement("hr",null))}}]),a}(n.Component),ae=(a(473),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={defaultCountrySlug:localStorage.getItem("country")||"mexico",menu:{fn:null},all:null,country:[],countryData:[],countries:[],countrySelected:{name:null,Country:"",value:"",label:null},countryCompare:{name:null,Country:"",value:"",label:null},isLoading:!1,provinces:[],provinceData:[],provinceSelected:{name:null,value:"",label:null},cities:[],citySelected:{name:null,value:"",label:null},usMap:{},isError:!1,width:500},e.getCountryInfo=function(){var t=e.state.countrySelected;e.setState({isLoading:!0,isError:!1}),O(t.value).then((function(t){var a,n,r,c,o,i=t.data;j(i)?(a=k(i),r=(n=I(a))[0],w(i)&&(o=(c=_(a,r))[0]),e.setState({usMap:a,country:i,cities:c,provinces:n,provinceSelected:r,citySelected:o})):e.setState({country:i,usMap:{},provinceSelected:{name:null},provinces:[],provinceData:[],citySelected:{name:null},cities:[]})})).catch((function(){return e.setState({isError:!0})})).finally((function(){return e.setState({isLoading:!1})}))},e.getData=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.state,c=r.usMap,o=r.citySelected,i=r.provinceSelected,l=w(t)?x(c,i,o):j(t)?c[i.label]:t;return l=n?M(l):l,a?N(l):l},e.renderTitle=function(){var t,a,n=e.state,r=n.citySelected,c=n.provinceSelected,o=n.countrySelected;return null!==(t=null!==(a=null===r||void 0===r?void 0:r.label)&&void 0!==a?a:null===c||void 0===c?void 0:c.label)&&void 0!==t?t:o.label},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state.defaultCountrySlug,a=window.innerWidth,n=a>=500?500:.8*a;g.a.get(b(),{headers:E}).then((function(a){var r=Object(m.sortBy)(a.data,["Slug"]),c=0,o=r.map((function(e,a){return e.Slug===t&&(c=a),Object(i.a)(Object(i.a)({},e),{},{value:e.Slug,label:e.Country,name:e.Slug})}));e.setState({countries:o,countrySelected:o[c],countryCompare:o[81],width:n})}))}},{key:"componentDidUpdate",value:function(e,t){if(this.state.isError)this.getCountryInfo();else if(!this.state.isLoading)if(Object(m.isEqual)(t.countrySelected,this.state.countrySelected)){if(!Object(m.isEqual)(t.provinceSelected,this.state.provinceSelected)&&w(this.state.country)){var a=_(this.state.usMap,this.state.provinceSelected);this.setState({cities:a,citySelected:a[0]})}}else this.getCountryInfo()}},{key:"renderChart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.state.width,n=this.getData(e,t);return n&&n.length?r.a.createElement(p.b,{width:a,height:250,data:n,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorDeaths",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})),r.a.createElement("linearGradient",{id:"colorConfirmed",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),r.a.createElement(p.e,{dataKey:"Date"}),r.a.createElement(p.f,null),r.a.createElement(p.c,{strokeDasharray:"3 3"}),r.a.createElement(p.d,null),r.a.createElement(p.a,{type:"monotone",dataKey:"Confirmed",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorConfirmed)"}),r.a.createElement(p.a,{type:"monotone",dataKey:"Deaths",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorDeaths)"})):r.a.createElement("div",null,"No data")}},{key:"renderCompareChart",value:function(e){var t=this,a=this.state,n=a.country,c=a.countries,o=a.countryCompare,i=a.width;return r.a.createElement("div",{className:"covid__chart"},r.a.createElement("h3",{className:"covid__chart-text"},"Compare with other country"),r.a.createElement("div",{className:"covid__chart-select"},r.a.createElement(h.a,{onChange:function(e){return t.setState({countryCompare:e})},options:c,value:o})),n.length&&r.a.createElement(V,{data:this.getData(n,!1,!1),width:i,countryCompare:o,hasProvinces:e}))}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.country,c=a.countries,o=a.countrySelected,i=a.isLoading,l=a.provinces,s=a.provinceSelected,u=a.cities,d=a.citySelected,p=a.usMap,m=a.width,v=a.isError,f=null!==(e=o.label)&&void 0!==e?e:"Country";if(!c.length||i)return r.a.createElement(R,{size:"xl",message:"Loading ".concat(f," Data")});var y=j(n),g=w(n);return r.a.createElement("div",{className:"covid"},r.a.createElement("h2",{className:"covid__title"},"COVID ",o.label," Charts"),r.a.createElement("h3",{className:"covid__subtitle"},"Data Source: ",r.a.createElement("a",{href:"https://github.com/CSSEGISandData/COVID-19"},"Johns Hopkins CSSE")),r.a.createElement(A,{countrySelected:o}),v&&r.a.createElement("div",{className:"covid__error"},"Error Getting Data: Try Again"),r.a.createElement("div",{className:"covid__dropdowns"},r.a.createElement(h.a,{onChange:function(e){return t.setState({countrySelected:e})},options:c,value:o}),y&&r.a.createElement(h.a,{onChange:function(e){return t.setState({provinceSelected:e})},options:l,value:s}),g&&r.a.createElement(h.a,{onChange:function(e){return t.setState({citySelected:e})},options:u,value:d})),r.a.createElement("hr",null),r.a.createElement("div",{className:"covid__charts"},r.a.createElement("h3",{className:"covid__chart-text"},"Total Confirmed and Deaths"),this.renderChart(n),r.a.createElement("hr",null),r.a.createElement("h3",{className:"covid__chart-text"},"Incremental Confirmed (To Date - One Day Before) and Deaths"),this.renderChart(n,!0),r.a.createElement("hr",null),!y&&this.renderCompareChart(y),r.a.createElement("hr",null),r.a.createElement("h3",{className:"covid__chart-text"},"Make Your Own ",this.renderTitle()," Chart"),r.a.createElement(G,{countries:c,data:this.getData(n,!1,!1),map:p,width:m}),r.a.createElement("hr",null),r.a.createElement("div",{className:"covid__texts"},r.a.createElement("div",{className:"covid__text"},o.label),y&&r.a.createElement("div",{className:"covid__text"},null===s||void 0===s?void 0:s.label),g&&r.a.createElement("div",{className:"covid__text"},null===d||void 0===d?void 0:d.label)),r.a.createElement("hr",null),r.a.createElement("hr",null),r.a.createElement("h3",{className:"covid__chart-text"},"Confirmed Type Projections Holt-Winter"),n.length&&r.a.createElement(te,{data:this.getData(n,!1,!1),type:"Confirmed",width:m}),r.a.createElement("hr",null),r.a.createElement("h3",{className:"covid__chart-text"},"Confirmed Type Projections"),n.length&&r.a.createElement(Z,{data:this.getData(n,!1,!1),type:"Confirmed",width:m})),r.a.createElement(T,null))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[246,1,2]]]);
//# sourceMappingURL=main.8d7f3195.chunk.js.map