(this["webpackJsonpcovid-charts"]=this["webpackJsonpcovid-charts"]||[]).push([[0],{245:function(e,t,a){e.exports=a(475)},250:function(e,t,a){},427:function(e,t,a){},444:function(e,t,a){},448:function(e,t){},449:function(e,t){},460:function(e,t){},463:function(e,t){},464:function(e,t){},465:function(e,t,a){},466:function(e,t,a){},467:function(e,t,a){},468:function(e,t,a){},469:function(e,t,a){},470:function(e,t,a){},474:function(e,t,a){},475:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a.n(n),i=a(52),c=a.n(i),o=(a(250),a(27)),l=a(4),s=a(9),u=a(13),d=a(14),h=a(87),m=a(36),p=a(37),v=a(32),f=(a(427),function(e){var t=e.options,a=e.selected,n=e.onChange;return r.a.createElement("div",{className:"chart-options"},t.map((function(e,t){return r.a.createElement("label",{key:t},r.a.createElement("input",{type:"radio",name:"vote",value:e.value,key:t,checked:a===e.value,onChange:n}),e.text)})))}),y=a(86),g=a.n(y),E={"cache-control":"no-cache","x-apikey":"5c932ad1cac6621685acc11e"},b=function(){return"https://api.covid19api.com/countries"},C=function(e){return"https://api.covid19api.com/dayone/country/".concat(e)},O=function(e){return g.a.get(C(e),{headers:E})},D=a(29),S=a.n(D),j=function(e){return e&&e.some((function(e){return""!==e.Province}))},k=function(e){return e&&e.some((function(e){return""!==e.City}))},_=function(e){var t={};return e.forEach((function(e){var a=""===e.Province?"Undefined":e.Province,n=""===e.City?"Undefined":e.City,r=Object(o.a)(Object(o.a)({},e),{},{Province:a,City:n});Object.keys(t).includes(r.Province)?t[r.Province].push(r):t=Object(o.a)(Object(o.a)({},t),{},Object(v.a)({},r.Province,[r]))})),t},w=function(e,t){return e[t.label].map((function(e){return e.City})).filter((function(e,t,a){return a.indexOf(e)===t})).sort().map((function(e){return{value:e,name:e,label:e}}))},x=function(e,t,a){return e[t.label].filter((function(e){return e.City===a.label}))},N=function(e){if(e.length){for(var t=e[0],a=[t.Confirmed],n=[t.Deaths],r=1;r<e.length;r++){t=e[r];var i=e[r-1];a[r]=t.Confirmed-i.Confirmed,n[r]=t.Deaths-i.Deaths}return e.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{Confirmed:a[t]})}))}},I=function(e){return Object.keys(e).sort().map((function(e){return{name:e,label:e,value:e}}))},P=function(e){return e.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{Date:S()(e.Date).format("MMM Do")})}))},V=(a(444),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={isLoading:!1,countryData:[],yValues:[{value:"Confirmed",text:"Confirmed"},{value:"Deaths",text:"Deaths"},{value:"Recovered",text:"Recovered"},{value:"Active",text:"Active"}],selectedY:"Confirmed"},e.getCountryInfo=function(){var t=e.props,a=t.countryCompare,n=t.hasProvinces;e.setState({countryData:[]}),n||(e.setState({isLoading:!0}),O(a.value).then((function(t){return e.setState({countryData:t.data})})).finally((function(){return e.setState({isLoading:!1})})))},e.getData=function(){var t=e.props,a=t.data,n=t.countryCompare,r=e.state,i=r.countryData,c=r.selectedY,l=[];if(a.length&&i.length){var s={};i.forEach((function(e){s=Object(o.a)(Object(o.a)({},s),{},Object(v.a)({},e.Date,e))})),l=a.map((function(e){var t,a=s[e.Date];return t={},Object(v.a)(t,e.Country,e[c]),Object(v.a)(t,n.label,a?a[c]:0),Object(v.a)(t,"Date",e.Date),t}))}return l},e.renderChart=function(){var t=e.props.width,a=e.getData();if(!a||!a.length)return r.a.createElement("div",null,"Data no available");a=P(a);var n=Object.keys(a[0]);return r.a.createElement(m.b,{width:t,height:250,data:a,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"color1",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})),r.a.createElement("linearGradient",{id:"color2",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0}))),r.a.createElement(m.e,{dataKey:"Date"}),r.a.createElement(m.f,null),r.a.createElement(m.c,{strokeDasharray:"3 3"}),r.a.createElement(m.d,null),r.a.createElement(m.a,{type:"monotone",dataKey:n[0],stroke:"#82ca9d",fillOpacity:1,fill:"url(#color1)"}),r.a.createElement(m.a,{type:"monotone",dataKey:n[1],stroke:"#8884d8",fillOpacity:1,fill:"url(#color2)"}))},e.renderOptions=function(){var t=e.state,a=t.yValues,n=t.selectedY;return r.a.createElement("div",{className:"compare-chart__options"},r.a.createElement("div",{className:"compare-chart__values"},"Values (Y Axis)"),r.a.createElement(f,{options:a,selected:n,onChange:function(t){return t&&e.setState({selectedY:t.target.value})}}))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getCountryInfo()}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.countryCompare;Object(p.isEqual)(e.countryCompare,a)||this.getCountryInfo()}},{key:"render",value:function(){return this.props.hasProvinces?r.a.createElement("div",null,"Country not available to compare"):r.a.createElement("div",{className:"compare-chart"},this.renderOptions(),r.a.createElement("hr",null),this.renderChart())}}]),a}(n.Component)),A=a(17),M=a(40),L=a(62),R=a.n(L),z=a(76),Y=a.n(z),F=a(214),T=a.n(F),G=(a(465),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"getSize",value:function(){switch(this.props.size){case"sm":return 8;case"md":return 16;case"lg":return 32;case"xl":return 64;default:return 8}}},{key:"render",value:function(){var e=this.props,t=e.message,a=e.showProgress,n=this.getSize();return r.a.createElement("div",{className:a?"stuffie-loading-progress":"stuffie-loading"},r.a.createElement(T.a,{type:"spin",color:"#00f",height:n,width:n}),t&&r.a.createElement("div",{className:"stuffie-loading__message"},t))}}]),a}(n.Component)),q={chart:{height:250,zoomType:"x"},title:{text:""},legend:{enabled:!1},xAxis:{type:"datetime"},tooltip:{shared:!0},credits:{enabled:!1},plotOptions:{areaspline:{fillOpacity:.1}}},U=(a(466),function(e,t,a){return new Promise((function(n,r){var i=[],c=[],o=e.length,l=e.map((function(e){return e[t]})),s=K(l,X(l),H(l)),u=s.data;try{for(var d=a;d<o;d++){for(var h=d-a;h<d;h++)i.push(u[h]);c.push(u[d])}}catch(m){n(m),console.log(m)}return n({size:o-a,timePortion:a,trainX:i,trainY:c,min:s.min,max:s.max,originalData:l})}))}),B=function(e,t){for(var a=e.length,n=[],r=a-t;r<a;r++)n.push(e[r]);return n},K=function(e,t,a){return{data:e.map((function(e){return(e-t)/(a-t)})),min:t,max:a}},W=function(e,t,a){return{data:e.map((function(e){return e*(a-t)+t})),min:t,max:a}},X=function(e){return Math.min.apply(Math,Object(A.a)(e))},H=function(e){return Math.max.apply(Math,Object(A.a)(e))};Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};var J=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={epochs:100,timePortion:7,predictedData:[],predictedDates:[],isLoading:!1,message:"",error:null,model:{predict:function(e){}},wait:!1,yValues:["Confirmed","Deaths","Recovered","Active"],type:"Confirmed"},e.buildCnn=function(e){return new Promise((function(t,a){var n=M.b();n.add(M.a.inputLayer({inputShape:[7,1]}));var r=M.a.conv1d({kernelSize:2,filters:128,strides:1,useBias:!0,activation:"relu",kernelInitializer:"VarianceScaling"});return n.add(r),n.add(M.a.averagePooling1d({poolSize:[2],strides:[1]})),n.add(M.a.conv1d({kernelSize:2,filters:64,strides:1,useBias:!0,activation:"relu",kernelInitializer:"VarianceScaling"})),n.add(M.a.averagePooling1d({poolSize:[2],strides:[1]})),n.add(M.a.flatten({})),n.add(M.a.dense({units:1,kernelInitializer:"VarianceScaling",activation:"linear"})),n?t({model:n,data:e}):a("Model not created")}))},e.cnn=function(e,t,a){return e.summary(),new Promise((function(n,r){try{e.compile({optimizer:"adam",loss:"meanSquaredError"}),e.fit(t.tensorTrainX,t.tensorTrainY,{epochs:a}).then((function(t){n(e)}))}catch(i){r(i)}}))},e.loadData=function(){var t=e.props.data,a=e.state,n=a.timePortion,r=a.epochs,i=a.type,c=t.map((function(e){return e.Date}));e.setState({isLoading:!0,message:"Processing..."}),U(t,i,n).then((function(t){var a=B(t.originalData,t.timePortion);e.setState({message:"Building CNN "}),e.buildCnn(t).then((function(t){var n={tensorTrainX:M.c(t.data.trainX).reshape([t.data.size,t.data.timePortion,1]),tensorTrainY:M.c(t.data.trainY)},i=t.data.max,o=t.data.min;e.setState({message:"Getting model"}),e.cnn(t.model,n,r).then((function(r){e.setState({model:r});var l=r.predict(n.tensorTrainX),s=K(a,o,i),u=M.c(s.data).reshape([1,t.data.timePortion,1]),d=r.predict(u);e.setState({message:"Getting predictedValue data"}),d.data().then((function(t){var a=W(t,o,i);e.setState({message:"Finishing and cleaning data "}),l.data().then((function(t){var n=W(t,o,i);n.data=Array.prototype.slice.call(n.data),n.data=[].concat(Object(A.a)(n.data),Object(A.a)(a.data)),e.setState({predictedData:n.data,predictedDates:c,isLoading:!1,message:""})}))}))}),(function(t){return e.setState({error:t,isLoading:!1})}))}),(function(t){return e.setState({error:t,isLoading:!1})}))}))},e.predictMore=function(){var t=e.state,a=t.predictedData,n=t.timePortion,r=t.model;e.setState({wait:!0});var i=Object(A.a)(a),c=B(i,n),o=X(a),l=H(a),s=K(c,o,l),u=M.c(s.data).reshape([1,n,1]);r.predict(u).data().then((function(t){var n=W(t,o,l);n.data=Array.prototype.slice.call(n.data),e.setState({predictedData:[].concat(Object(A.a)(a),Object(A.a)(n.data)),wait:!1})}))},e.getSeries=function(){var t=e.props.data,a=e.state,n=a.predictedData,r=a.predictedDates,i=a.timePortion,c=a.type,o=[],l=t.map((function(e){return[S()(e.Date).valueOf(),e[c]]})),s=null,u=[];return n.length&&r.length&&(s=n.map((function(e,t){var a=r.length>t+i?S()(r[t+i]):u[u.length-1].add(1,"days");return u.push(a),[a.valueOf(),e]}))),o.push({type:"area",name:c,data:l}),s&&o.push({type:"line",name:"Predicted ".concat(c),data:s,color:"#FF00FF"}),o},e.renderOptions=function(){var t=e.state,a=t.yValues,n=t.type;return r.a.createElement("div",{className:"covid-predictions__options"},r.a.createElement("div",{className:"covid-predictions__values"},"Values (Y Axis)"),a.map((function(t,a){return r.a.createElement("label",{className:"covid-predictions__value",key:a},r.a.createElement("input",{type:"radio",value:t,checked:n===t,onChange:function(t){return t&&e.setState({type:t.target.value})}}),t)})))},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e,t){Object(p.isEqual)(e,this.props)?Object(p.isEqual)(t.type,this.state.type)||this.setState({predictedData:[],predictedDates:[],isLoading:!1,message:"",error:null,wait:!1}):this.setState({predictedData:[],predictedDates:[],isLoading:!1,message:"",error:null,wait:!1,type:"Confirmed"})}},{key:"renderChart",value:function(){var e=this.props.width,t=Object(o.a)(Object(o.a)({},q),{},{chart:Object(o.a)(Object(o.a)({},q.chart),{},{width:e}),series:this.getSeries()});return r.a.createElement(Y.a,{highcharts:R.a,options:t})}},{key:"renderChartState",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.message,i=t.wait,c=t.predictedData;return r.a.createElement("div",{className:"covid-predictions__wrapper"},r.a.createElement("button",{disabled:a||c.length>0,onClick:function(t){return t&&e.loadData()}},"Generate Model!"),a&&r.a.createElement(G,{size:"xl",message:n,showProgress:!0}),!a&&this.renderChart(),!!c.length&&!a&&r.a.createElement("button",{disabled:i,onClick:function(t){return t&&e.predictMore()}},"Predict next day!"))}},{key:"render",value:function(){var e=this.state.error;return e?r.a.createElement("div",null,"Couldn't load chart: ",e):r.a.createElement("div",{className:"covid-predictions"},this.renderOptions(),this.renderChartState())}}]),a}(n.Component),$=(a(467),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("div",null,"Covid Charts\u2122 is a platform coded by \xa0",r.a.createElement("a",{href:"http://stuffie.azurewebsites.net/PM_Carlos-Reyes2.html",target:"_blank",rel:"noopener noreferrer"},"Carlos Reyes-Rico"),"."),r.a.createElement("div",null,"Why?: Click ",r.a.createElement("a",{href:"https://github.com/reyesrico/CovidCharts/blob/master/README.md"},"here")),r.a.createElement("div",null,"Code: ",r.a.createElement("a",{href:"https://github.com/reyesrico/CovidCharts"},"https://github.com/reyesrico/CovidCharts")),r.a.createElement("div",null,"Contact and Follow Me! Twitter: ",r.a.createElement("a",{href:"https://twitter.com/reyesrico"},"@reyesrico")))}}]),a}(n.Component)),Q=(a(468),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.countrySelected;return r.a.createElement("div",{className:"instructions"},r.a.createElement("h4",{className:"instructions__title"},"Instructions"),r.a.createElement("ol",{className:"instructions__list"},r.a.createElement("li",null,"Select a country"),r.a.createElement("li",null,"If country has states data: select a state"),r.a.createElement("li",null,"If country has cities data: select a city")),r.a.createElement("div",{className:"instructions__examples"},r.a.createElement("div",null,"Flatten Curves Examples: ",r.a.createElement("b",null,"Germany, Korea (South), United States (NY, NY)")),r.a.createElement("button",{className:"instructions__button",onClick:function(t){return t&&localStorage.setItem("country",e.value)}},"Save Default Country")))}}]),a}(n.Component)),Z=(a(469),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={series:{},yValues:{Confirmed:!0,Deaths:!1,Recovered:!1,Active:!1,ConfirmedInc:!1,DeathsInc:!1,RecoveredInc:!1,ActiveInc:!1}},e.clearYValues=function(){var t={};Object.keys(e.state.yValues).forEach((function(e){var a="Confirmed"===e;t=Object(o.a)(Object(o.a)({},t),{},Object(v.a)({},e,a))})),e.setState({yValues:t})},e.yValuesFalse=function(){return!Object.values(e.state.yValues).reduce((function(e,t){return e||t}))},e.renderOptions=function(){var t=e.state.yValues;return r.a.createElement("div",{className:"make-chart__options"},r.a.createElement("div",{className:"make-chart__values"},"Values (Y Axis)"),Object.keys(t).map((function(a,n){var i=t[a];return r.a.createElement("div",{key:n},r.a.createElement("input",{checked:i,type:"checkbox",name:"yaxis",value:a,id:a,onChange:function(t){return t&&e.changeInput(a)}}),a)})))},e.getData=function(){var t=e.props.data,a=e.state.yValues;if(!e.yValuesFalse()){var n=[],r=[],i=[],c=[],o=[],l=[],s=[],u=[];t.forEach((function(e,d){if(a.Confirmed&&n.push([S()(e.Date).valueOf(),e.Confirmed]),a.Deaths&&r.push([S()(e.Date).valueOf(),e.Deaths]),a.Recovered&&i.push([S()(e.Date).valueOf(),e.Recovered]),a.Active&&c.push([S()(e.Date).valueOf(),e.Active]),0===d)a.ConfirmedInc&&o.push([S()(e.Date).valueOf(),0]),a.DeathsInc&&l.push([S()(e.Date).valueOf(),0]),a.RecoveredInc&&s.push([S()(e.Date).valueOf(),0]),a.ActiveInc&&u.push([S()(e.Date).valueOf(),0]);else{var h=t[d-1];a.ConfirmedInc&&o.push([S()(e.Date).valueOf(),e.Confirmed-h.Confirmed]),a.DeathsInc&&l.push([S()(e.Date).valueOf(),e.Deaths-h.Deaths]),a.RecoveredInc&&s.push([S()(e.Date).valueOf(),e.Recovered-h.Recovered]),a.ActiveInc&&u.push([S()(e.Date).valueOf(),e.Active-h.Active])}}));var d=[];a.Confirmed&&d.push({type:"area",name:"Confirmed",data:n}),a.Deaths&&d.push({type:"area",name:"Deaths",data:r}),a.Recovered&&d.push({type:"area",name:"Recovered",data:i}),a.Active&&d.push({type:"area",name:"Active",data:c}),a.ConfirmedInc&&d.push({type:"area",name:"ConfirmedInc",data:o}),a.DeathsInc&&d.push({type:"area",name:"DeathsInc",data:l}),a.RecoveredInc&&d.push({type:"area",name:"RecoveredInc",data:s}),a.ActiveInc&&d.push({type:"area",name:"ActiveInc",data:u}),e.setState({series:d})}},e.renderChart=function(){var t=e.props.width,a=e.state.series,n=Object(o.a)(Object(o.a)({},q),{},{chart:Object(o.a)(Object(o.a)({},q.chart),{},{width:t}),series:a});if(!Object(p.isEmpty)(a))return r.a.createElement(Y.a,{highcharts:R.a,options:n})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(e,t){var a=this.state.yValues;Object(p.isEqual)(t.yValues,a)||(this.yValuesFalse()?this.clearYValues():this.getData())}},{key:"changeInput",value:function(e){var t=this.state.yValues[e],a=Object(o.a)({},this.state.yValues);a[e]=!t,this.setState({yValues:a})}},{key:"render",value:function(){return r.a.createElement("div",{className:"make-chart"},this.renderOptions(),r.a.createElement("hr",null),this.renderChart())}}]),a}(n.Component)),ee=(a(470),a(471)),te=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!1,predictions:[],period:7},e.getPredictions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.95,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2,r=e.props,i=r.data,c=r.type,o=e.state.period,l=i.map((function(e){return e[c]})),s=l.length%o,u=l.slice(s),d=ee(u,t,a,n,o,o);e.setState({predictions:d})},e.getSeries=function(){var t,a=e.props,n=a.data,r=a.type,i=e.state,c=i.predictions,o=i.period,l=[],s=n.length>=2&&n[0].Date&&n[1].Date&&S()(n[1].Date).valueOf()-S()(n[0].Date).valueOf()||0,u=n.length%o,d=n.map((function(e){return[S()(e.Date).valueOf(),e[r]]})),h=null===d||void 0===d||null===(t=d[0])||void 0===t?void 0:t[0],m=c.map((function(e,t){var a=t+u;return a<n.length?h=d[a][0]:h+=s,[h,e]}));return l.push({type:"area",name:r,data:d}),l.push({type:"line",name:"Predicted ".concat(r),data:m,color:"#FF00FF"}),l},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getPredictions()}},{key:"componentDidUpdate",value:function(e){Object(p.isEqual)(e.data,this.props.data)||(this.setState({isLoading:!1,predictions:[],period:7}),this.getPredictions())}},{key:"renderChart",value:function(){var e=this.props.width,t=Object(o.a)(Object(o.a)({},q),{},{chart:Object(o.a)(Object(o.a)({},q.chart),{},{width:e}),series:this.getSeries()});return r.a.createElement(Y.a,{highcharts:R.a,options:t})}},{key:"render",value:function(){var e=this.state.predictions;return r.a.createElement("div",{className:"projections"},r.a.createElement("h3",null,"Projections using Holt-Winters"),!e&&r.a.createElement("div",null,"No Predictions"),e&&!e.length&&r.a.createElement("div",null,"Loading"),e&&e.length&&this.renderChart(),r.a.createElement("hr",null))}}]),a}(n.Component),ae=(a(474),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={defaultCountrySlug:localStorage.getItem("country")||"mexico",menu:{fn:null},all:null,country:[],countryData:[],countries:[],countrySelected:{name:null,Country:"",value:"",label:null},countryCompare:{name:null,Country:"",value:"",label:null},isLoading:!1,provinces:[],provinceData:[],provinceSelected:{name:null,value:"",label:null},cities:[],citySelected:{name:null,value:"",label:null},usMap:{},isError:!1,width:500},e.getCountryInfo=function(){var t=e.state.countrySelected;e.setState({isLoading:!0,isError:!1}),O(t.value).then((function(t){var a,n,r,i,c,o=t.data;j(o)?(a=_(o),r=(n=I(a))[0],k(o)&&(c=(i=w(a,r))[0]),e.setState({usMap:a,country:o,cities:i,provinces:n,provinceSelected:r,citySelected:c})):e.setState({country:o,usMap:{},provinceSelected:{name:null},provinces:[],provinceData:[],citySelected:{name:null},cities:[]})})).catch((function(){return e.setState({isError:!0})})).finally((function(){return e.setState({isLoading:!1})}))},e.getData=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.state,i=r.usMap,c=r.citySelected,o=r.provinceSelected,l=k(t)?x(i,o,c):j(t)?i[o.label]:t;return l=n?P(l):l,a?N(l):l},e.renderTitle=function(){var t,a,n=e.state,r=n.citySelected,i=n.provinceSelected,c=n.countrySelected;return null!==(t=null!==(a=null===r||void 0===r?void 0:r.label)&&void 0!==a?a:null===i||void 0===i?void 0:i.label)&&void 0!==t?t:c.label},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state.defaultCountrySlug,a=window.innerWidth,n=a>=500?500:.8*a;g.a.get(b(),{headers:E}).then((function(a){var r=Object(p.sortBy)(a.data,["Slug"]),i=0,c=r.map((function(e,a){return e.Slug===t&&(i=a),Object(o.a)(Object(o.a)({},e),{},{value:e.Slug,label:e.Country,name:e.Slug})}));e.setState({countries:c,countrySelected:c[i],countryCompare:c[81],width:n})}))}},{key:"componentDidUpdate",value:function(e,t){if(this.state.isError)this.getCountryInfo();else if(!this.state.isLoading)if(Object(p.isEqual)(t.countrySelected,this.state.countrySelected)){if(!Object(p.isEqual)(t.provinceSelected,this.state.provinceSelected)&&k(this.state.country)){var a=w(this.state.usMap,this.state.provinceSelected);this.setState({cities:a,citySelected:a[0]})}}else this.getCountryInfo()}},{key:"renderChart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.state.width,n=this.getData(e,t);return n&&n.length?r.a.createElement(m.b,{width:a,height:250,data:n,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorDeaths",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})),r.a.createElement("linearGradient",{id:"colorConfirmed",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),r.a.createElement(m.e,{dataKey:"Date"}),r.a.createElement(m.f,null),r.a.createElement(m.c,{strokeDasharray:"3 3"}),r.a.createElement(m.d,null),r.a.createElement(m.a,{type:"monotone",dataKey:"Confirmed",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorConfirmed)"}),r.a.createElement(m.a,{type:"monotone",dataKey:"Deaths",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorDeaths)"})):r.a.createElement("div",null,"No data")}},{key:"renderCompareChart",value:function(e){var t=this,a=this.state,n=a.country,i=a.countries,c=a.countryCompare,o=a.width;return r.a.createElement("div",{className:"covid__chart"},r.a.createElement("h3",{className:"covid__chart-text"},"Compare with other country"),r.a.createElement("div",{className:"covid__chart-select"},r.a.createElement(h.a,{onChange:function(e){return t.setState({countryCompare:e})},options:i,value:c})),n.length&&r.a.createElement(V,{data:this.getData(n,!1,!1),width:o,countryCompare:c,hasProvinces:e}))}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.country,i=a.countries,c=a.countrySelected,o=a.isLoading,l=a.provinces,s=a.provinceSelected,u=a.cities,d=a.citySelected,m=a.usMap,p=a.width,v=a.isError,f=null!==(e=c.label)&&void 0!==e?e:"Country";if(!i.length||o)return r.a.createElement(G,{size:"xl",message:"Loading ".concat(f," Data")});var y=j(n),g=k(n);return r.a.createElement("div",{className:"covid"},r.a.createElement("h2",{className:"covid__title"},"COVID ",c.label," Charts"),r.a.createElement("h3",{className:"covid__subtitle"},"Data Source: ",r.a.createElement("a",{href:"https://github.com/CSSEGISandData/COVID-19"},"Johns Hopkins CSSE")),r.a.createElement(Q,{countrySelected:c}),v&&r.a.createElement("div",{className:"covid__error"},"Error Getting Data: Try Again"),r.a.createElement("div",{className:"covid__dropdowns"},r.a.createElement(h.a,{onChange:function(e){return t.setState({countrySelected:e})},options:i,value:c}),y&&r.a.createElement(h.a,{onChange:function(e){return t.setState({provinceSelected:e})},options:l,value:s}),g&&r.a.createElement(h.a,{onChange:function(e){return t.setState({citySelected:e})},options:u,value:d})),r.a.createElement("hr",null),r.a.createElement("div",{className:"covid__charts"},r.a.createElement("h3",{className:"covid__chart-text"},"Total Confirmed and Deaths"),this.renderChart(n),r.a.createElement("hr",null),r.a.createElement("h3",{className:"covid__chart-text"},"Incremental Confirmed (To Date - One Day Before) and Deaths"),this.renderChart(n,!0),r.a.createElement("hr",null),!y&&this.renderCompareChart(y),r.a.createElement("hr",null),r.a.createElement("h3",{className:"covid__chart-text"},"Make Your Own ",this.renderTitle()," Chart"),r.a.createElement(Z,{countries:i,data:this.getData(n,!1,!1),map:m,width:p}),r.a.createElement("hr",null),r.a.createElement("div",{className:"covid__texts"},r.a.createElement("div",{className:"covid__text"},c.label),y&&r.a.createElement("div",{className:"covid__text"},null===s||void 0===s?void 0:s.label),g&&r.a.createElement("div",{className:"covid__text"},null===d||void 0===d?void 0:d.label)),r.a.createElement("hr",null),r.a.createElement("h3",{className:"covid__chart-text"},"Covid Preditions (based on StockPredictions)"),n.length&&r.a.createElement(J,{data:this.getData(n,!1,!1),width:p}),r.a.createElement("hr",null),r.a.createElement("h3",{className:"covid__chart-text"},"Confirmed Type Projections Holt-Winter"),n.length&&r.a.createElement(te,{data:this.getData(n,!1,!1),type:"Confirmed",width:p}),r.a.createElement("hr",null)),r.a.createElement($,null))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[245,1,2]]]);
//# sourceMappingURL=main.23698213.chunk.js.map